<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>ä¸‰æ å¸ƒå±€</title>
    <url>/2021/04/09/%E4%B8%89%E6%A0%8F%E5%B8%83%E5%B1%80/</url>
    <content><![CDATA[<h3 id="ä¸‰æ å¸ƒå±€"><a href="#ä¸‰æ å¸ƒå±€" class="headerlink" title="ä¸‰æ å¸ƒå±€"></a>ä¸‰æ å¸ƒå±€</h3><h4 id="åœ£æ¯å¸ƒå±€"><a href="#åœ£æ¯å¸ƒå±€" class="headerlink" title="åœ£æ¯å¸ƒå±€"></a>åœ£æ¯å¸ƒå±€</h4><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.container</span>&#123;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">240px</span>;</span><br><span class="line">    <span class="attribute">margin-right</span>: <span class="number">120px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.container</span> &gt; <span class="selector-tag">div</span>&#123;</span><br><span class="line">    <span class="attribute">float</span><span class="selector-pseudo">:left</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.content</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">300px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: green;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.left</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>:<span class="number">220px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">300px</span>;</span><br><span class="line">    <span class="attribute">margin-left</span>: -<span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">left</span>: -<span class="number">240px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: yellow;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.right</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">300px</span>;</span><br><span class="line">    <span class="attribute">margin-left</span>: -<span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: pink;		</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">right</span>: -<span class="number">120px</span>;	</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.container</span><span class="selector-pseudo">::after</span>&#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">clear</span>: both;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="åŒé£ç¿¼å¸ƒå±€"><a href="#åŒé£ç¿¼å¸ƒå±€" class="headerlink" title="åŒé£ç¿¼å¸ƒå±€"></a>åŒé£ç¿¼å¸ƒå±€</h4><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.container</span>&#123;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">300px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.container</span> &gt; <span class="selector-tag">div</span>&#123;</span><br><span class="line">    <span class="attribute">float</span><span class="selector-pseudo">:left</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.content</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">300px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.middle</span>&#123;</span><br><span class="line">    <span class="attribute">margin-left</span>:<span class="number">240px</span>;</span><br><span class="line">    <span class="attribute">margin-right</span>: <span class="number">120px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">300px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: green;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.left</span>&#123;</span><br><span class="line">    <span class="attribute">margin-left</span>: -<span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">width</span>:<span class="number">220px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">300px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: yellow;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.right</span>&#123;</span><br><span class="line">    <span class="attribute">margin-left</span>: -<span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">300px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: pink;			</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Flexå¸ƒå±€"><a href="#Flexå¸ƒå±€" class="headerlink" title="Flexå¸ƒå±€"></a>Flexå¸ƒå±€</h4><p>Flexå¸ƒå±€çš„ç¼ºç‚¹æ˜¯å…¼å®¹æ€§é—®é¢˜ï¼Œå¦‚æœIE10+è¿˜æ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.container</span>&#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.left</span>&#123;</span><br><span class="line">    <span class="attribute">height</span>:<span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: yellow;</span><br><span class="line">    <span class="attribute">flex-shrink</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">order</span>: -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.main</span>&#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: green;</span><br><span class="line">    <span class="attribute">flex-grow</span>: <span class="number">1</span>;</span><br><span class="line">    <span class="attribute">margin</span>:<span class="number">0</span> <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.right</span>&#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: pink;</span><br><span class="line">    <span class="attribute">flex-shrink</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="æµå¼å¸ƒå±€"><a href="#æµå¼å¸ƒå±€" class="headerlink" title="æµå¼å¸ƒå±€"></a>æµå¼å¸ƒå±€</h4><p>æµå¼å¸ƒå±€çš„ç¼ºç‚¹æ˜¯ï¼Œä¸èƒ½ä½¿contentå†…å®¹ä¼˜å…ˆæ¸²æŸ“ã€‚</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.container</span>&#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">300px</span>;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">    <span class="comment">/*display: flow-root;*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.content</span>&#123;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">240px</span>;</span><br><span class="line">    <span class="attribute">margin-right</span>: <span class="number">120px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">300px</span>;</span><br><span class="line">    <span class="comment">/*overflow: hidden;*/</span></span><br><span class="line">    <span class="attribute">background-color</span>: green;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.left</span>&#123;</span><br><span class="line">    <span class="attribute">float</span><span class="selector-pseudo">:left</span>;</span><br><span class="line">    <span class="attribute">width</span>:<span class="number">220px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">300px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: yellow;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.right</span>&#123;</span><br><span class="line">    <span class="attribute">float</span>: right;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">300px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: pink;			</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="ç»å¯¹å®šä½å¸ƒå±€"><a href="#ç»å¯¹å®šä½å¸ƒå±€" class="headerlink" title="ç»å¯¹å®šä½å¸ƒå±€"></a>ç»å¯¹å®šä½å¸ƒå±€</h4><p>ç»å¯¹å®šä½å¸ƒå±€ï¼Œç®€å•å®ç”¨ã€‚</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.container</span>&#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.center</span>&#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">120px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">300px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: pink;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.left</span>&#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">300px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: yellow;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.right</span>&#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">300px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: green;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>å‚è€ƒé“¾æ¥ï¼š</p>
<p><a href="https://zhuanlan.zhihu.com/p/25070186">https://zhuanlan.zhihu.com/p/25070186</a></p>
]]></content>
      <categories>
        <category>front-end</category>
      </categories>
      <tags>
        <tag>CSS</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title>å…¨æ’åˆ—</title>
    <url>/2021/04/24/%E5%85%A8%E6%8E%92%E5%88%97/</url>
    <content><![CDATA[<h4 id="å…¨æ’åˆ—1"><a href="#å…¨æ’åˆ—1" class="headerlink" title="å…¨æ’åˆ—1"></a>å…¨æ’åˆ—1</h4><ul>
<li>ç»™å®šä¸€ä¸ª <strong>æ²¡æœ‰é‡å¤</strong> æ•°å­—çš„åºåˆ—ï¼Œè¿”å›å…¶æ‰€æœ‰å¯èƒ½çš„å…¨æ’åˆ—ã€‚</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> permute = <span class="function"><span class="keyword">function</span>(<span class="params">nums</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(nums.length == <span class="number">0</span> )&#123;</span><br><span class="line">        <span class="keyword">return</span> nums;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">const</span> res = [], path = [], used = [];</span><br><span class="line"></span><br><span class="line">    dfs(res, nums, <span class="number">0</span>, path, nums.length, used);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">dfs</span>(<span class="params">res, nums, depth, path, len, used</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(depth == len)&#123;</span><br><span class="line">        res.push([...path]);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;  </span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; len;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(!used[i])&#123;</span><br><span class="line">            path.push(nums[i]);</span><br><span class="line">            used[i] = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">            dfs(res, nums, depth + <span class="number">1</span> , path, len, used)</span><br><span class="line">			</span><br><span class="line">            path.pop();</span><br><span class="line">            used[i] = <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>è¿™ç§ç»å…¸çš„ç®—æ³•é¢˜ï¼Œæœ€å¼€å§‹å¯èƒ½çº ç»“äºä»£ç çš„æ‰§è¡Œé¡ºåºï¼ˆå¯ä»¥åœ¨è¿è¡Œç¯å¢ƒä¸­æ‰“æ–­ç‚¹ï¼Œä¸€æ­¥ä¸€æ­¥æ‰§è¡Œï¼Œè‡ªå·±çœ‹çœ‹é¡ºåºï¼‰ï¼Œåœ¨æˆ‘çœ‹æ¥æœ€é‡è¦çš„æ˜¯ç®—æ³•ç»“æ„ï¼Œæ¯”å¦‚è¿™é‡Œè§£å†³é—®é¢˜çš„æ€è·¯å°±æ˜¯é€šè¿‡<code>for</code>å¾ªç¯é‡ŒåŠ é€’å½’çš„ç»“æ„ï¼Œä½¿ç”¨è¿™ä¸ªç»“æ„çš„ç‰¹ç‚¹æ˜¯ï¼Œæ‰§è¡Œé€’å½’åé¢çš„ä»£ç ä¹‹åï¼Œä¼šç»§ç»­å‚åŠ <code>for</code>å¾ªç¯ï¼Œå°±æ˜¯åœ¨è¿™é‡Œå®ç°äº†æ’åˆ—ã€‚</p>
<h4 id="å…¨æ’åˆ—2"><a href="#å…¨æ’åˆ—2" class="headerlink" title="å…¨æ’åˆ—2"></a>å…¨æ’åˆ—2</h4><p>ç»™å®šä¸€ä¸ªå¯åŒ…å«é‡å¤æ•°å­—çš„åºåˆ— <code>nums</code> ï¼Œ<strong>æŒ‰ä»»æ„é¡ºåº</strong> è¿”å›æ‰€æœ‰ä¸é‡å¤çš„å…¨æ’åˆ—ã€‚</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> permuteUnique = <span class="function"><span class="keyword">function</span>(<span class="params">nums</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(nums.length === <span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> nums;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> [res,path,used] = [[],[],[]];</span><br><span class="line"></span><br><span class="line">    nums.sort(<span class="function">(<span class="params">val1, val2</span>) =&gt;</span> val1 -val2);</span><br><span class="line"></span><br><span class="line">    dfs(res, path, used, nums, nums.length, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">return</span> res; </span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">dfs</span>(<span class="params">res, path, used, nums, len, depth</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(depth === len)&#123;</span><br><span class="line">        res.push([...path]);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; len;i++)&#123;</span><br><span class="line">        <span class="comment">//å‰ªææ¡ä»¶</span></span><br><span class="line">        <span class="keyword">if</span>(i &gt; <span class="number">0</span> &amp;&amp; !used[i-<span class="number">1</span>] &amp;&amp; nums[i] === nums[i - <span class="number">1</span>])&#123;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(!used[i])&#123;</span><br><span class="line">            path.push(nums[i])</span><br><span class="line">            used[i] = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">            dfs(res, path, used, nums, len, depth + <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">            path.pop();</span><br><span class="line">            used[i] = <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>è¿™é‡Œå¤šäº†ä¸€ä¸ªå‰ªææ¡ä»¶ï¼ŒåŒæ—¶æ³¨æ„è¿™é‡Œé¦–å…ˆè¿›è¡Œäº†æ’åºå¤„ç†ã€‚</p>
<p>å‚è€ƒé“¾æ¥ï¼š</p>
<p><a href="https://leetcode-cn.com/problems/permutations-ii/solution/hui-su-suan-fa-python-dai-ma-java-dai-ma-by-liwe-2/">https://leetcode-cn.com/problems/permutations-ii/solution/hui-su-suan-fa-python-dai-ma-java-dai-ma-by-liwe-2/</a></p>
]]></content>
      <categories>
        <category>ç®—æ³•</category>
      </categories>
      <tags>
        <tag>å…¨æ’åˆ—</tag>
        <tag>å›æº¯</tag>
      </tags>
  </entry>
  <entry>
    <title>å›æµä¸é‡ç»˜</title>
    <url>/2021/04/18/%E5%9B%9E%E6%B5%81%E4%B8%8E%E9%87%8D%E7%BB%98/</url>
    <content><![CDATA[<h3 id="æµè§ˆå™¨æ¸²æŸ“çš„å…³é”®è·¯å¾„"><a href="#æµè§ˆå™¨æ¸²æŸ“çš„å…³é”®è·¯å¾„" class="headerlink" title="æµè§ˆå™¨æ¸²æŸ“çš„å…³é”®è·¯å¾„"></a>æµè§ˆå™¨æ¸²æŸ“çš„å…³é”®è·¯å¾„</h3><p>The critical rendering path includes the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Document_Object_Model">Document Object Model </a>(DOM), <a href="https://developer.mozilla.org/en-US/docs/Web/API/CSS_Object_Model">CSS Object Model </a>(CSSOM), render tree and layout.</p>
<p><img src="/images/critical-rendering-path.png"></p>
<h3 id="å…³äºæ¸²æŸ“æ ‘"><a href="#å…³äºæ¸²æŸ“æ ‘" class="headerlink" title="å…³äºæ¸²æŸ“æ ‘"></a>å…³äºæ¸²æŸ“æ ‘</h3><p>The render tree only captures visible content. The head section (generally) doesnâ€™t contain any visible information, and is therefore not included in the render tree. If thereâ€™s a display: none; set on an element, neither it, nor any of its descendants, are in the render tree.</p>
<p><img src="/images/render-tree-construction.png"></p>
<p>To construct the render tree, the browser roughly does the following:</p>
<ol>
<li>Starting at the root of the DOM tree, traverse each visible node.<ul>
<li>Some nodes are not visible (for example, script tags, meta tags, and so on), and are omitted since they are not reflected in the rendered output.</li>
<li>Some nodes are hidden via CSS and are also omitted from the render tree; for example, the span nodeâ€”in the example aboveâ€”is missing from the render tree because we have an explicit rule that sets the â€œdisplay: noneâ€ property on it.</li>
</ul>
</li>
<li>For each visible node, find the appropriate matching CSSOM rules and apply them.</li>
<li>Emit visible nodes with content and their computed styles.</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">note that visibility: hidden is different from display: none. </span><br><span class="line">The former makes the element invisible, but the element still occupies space in the layout (that is, it&#39;s rendered as an empty box), </span><br><span class="line">whereas the latter (display: none) removes the element entirely from the render tree such that the element is invisible and is not part of the layout.</span><br></pre></td></tr></table></figure>

<h4 id="è¡¥å……"><a href="#è¡¥å……" class="headerlink" title="è¡¥å……"></a>è¡¥å……</h4><p>ç”Ÿæˆâ€œå¸ƒå±€â€ï¼ˆlayoutï¼‰å’Œâ€ç»˜åˆ¶â€ï¼ˆpaintï¼‰è¿™ä¸¤æ­¥ï¼Œåˆç§°ä¸ºâ€æ¸²æŸ“â€ï¼ˆrenderï¼‰ã€‚</p>
<p>èŠåˆ°æ¸²æŸ“æˆ‘åˆæƒ³å†™å†™CSSçš„æ¸²æŸ“é˜»å¡ï¼ŒCSSä¸ä¼šé˜»å¡Domè§£æï¼Œä½†æ˜¯ä¼šé˜»å¡Domæ¸²æŸ“ï¼Œé˜»å¡JSçš„æ‰§è¡Œï¼Œæœ‰åŒå­¦å¯èƒ½ä¼šæœ‰JSï¼ŒCSSä¸‹è½½æ—¶é—´çš„ç–‘æƒ‘ï¼Œè¿™å°±ä¸å¾—ä¸æé¢„åŠ è½½æ‰«æå™¨ï¼ˆPreload Scannerï¼‰ã€‚</p>
<p>è¿™æ˜¯MDNçš„åŸè¯ï¼š</p>
<p>While the browser builds the DOM tree, this process occupies the main thread. As this happens, the <em>preload scanner</em> will parse through the content available and request high priority resources like CSS, JavaScript, and web fonts. Thanks to the preload scanner, we donâ€™t have to wait until the parser finds a reference to an external resource to request it. It will retrieve resources in the background so that by the time the main HTML parser reaches requested assets, they may possibly already be in flight, or have been downloaded. The optimizations the preload scanner provides reduce blockages.</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">src</span>=<span class="string">&quot;styles.css&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;myscript.js&quot;</span> <span class="attr">async</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;myimage.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;image description&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;anotherscript.js&quot;</span> <span class="attr">async</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>In this example, while the main thread is parsing the HTML and CSS, the preload scanner will find the scripts and image, and start downloading them as well.  To ensure the script doesnâ€™t block the process, add the <code>async</code> attribute, or the <code>defer</code> attribute if JavaScript parsing and execution order is not important.</p>
<p>Waiting to obtain CSS doesnâ€™t block HTML parsing or downloading, but it does block JavaScript, because JavaScript is often used to query CSS propertiesâ€™ impact on elements.</p>
<h3 id="å¸ƒå±€ä¸ç»˜åˆ¶å®šä¹‰"><a href="#å¸ƒå±€ä¸ç»˜åˆ¶å®šä¹‰" class="headerlink" title="å¸ƒå±€ä¸ç»˜åˆ¶å®šä¹‰"></a>å¸ƒå±€ä¸ç»˜åˆ¶å®šä¹‰</h3><h4 id="å¸ƒå±€"><a href="#å¸ƒå±€" class="headerlink" title="å¸ƒå±€"></a>å¸ƒå±€</h4><p>Once the render tree is built, layout becomes possible. Layout is dependent on the size of screen. The layout step determines where and how the elements are positioned on the page, determining the width and height of each element, and where they are in relation to each other.</p>
<h4 id="ç»˜åˆ¶"><a href="#ç»˜åˆ¶" class="headerlink" title="ç»˜åˆ¶"></a>ç»˜åˆ¶</h4><p>The last step is painting the pixels to the screen. Once the render tree is created and layout occurs, the pixels can be painted to the screen. Onload, the entire screen is painted. After that, only impacted areas of the screen will be repainted, as browsers are optimized to repaint the minimum area required. Paint time depends on what kind of updates are being applied to the render tree.</p>
<h3 id="å¸ƒå±€è§¦å‘æ¡ä»¶"><a href="#å¸ƒå±€è§¦å‘æ¡ä»¶" class="headerlink" title="å¸ƒå±€è§¦å‘æ¡ä»¶"></a>å¸ƒå±€è§¦å‘æ¡ä»¶</h3><p> Any time the render tree is modified, such as by added nodes, altered content, or updated box model styles on a node, layout occurs.</p>
<h3 id="å…³äºç»˜åˆ¶"><a href="#å…³äºç»˜åˆ¶" class="headerlink" title="å…³äºç»˜åˆ¶"></a>å…³äºç»˜åˆ¶</h3><p>While painting is a very fast process, and therefore likely not the most impactful place to focus on in improving performanceã€‚</p>
<h3 id="æµè§ˆå™¨ä¼˜åŒ–æœºåˆ¶"><a href="#æµè§ˆå™¨ä¼˜åŒ–æœºåˆ¶" class="headerlink" title="æµè§ˆå™¨ä¼˜åŒ–æœºåˆ¶"></a>æµè§ˆå™¨ä¼˜åŒ–æœºåˆ¶</h3><p>ç°ä»£çš„æµè§ˆå™¨éƒ½æ˜¯å¾ˆèªæ˜çš„ï¼Œç”±äºæ¯æ¬¡é‡æ’éƒ½ä¼šé€ æˆé¢å¤–çš„è®¡ç®—æ¶ˆè€—ï¼Œå› æ­¤å¤§å¤šæ•°æµè§ˆå™¨éƒ½ä¼šé€šè¿‡é˜Ÿåˆ—åŒ–ä¿®æ”¹å¹¶æ‰¹é‡æ‰§è¡Œæ¥ä¼˜åŒ–é‡æ’è¿‡ç¨‹ã€‚æµè§ˆå™¨ä¼šå°†ä¿®æ”¹æ“ä½œæ”¾å…¥åˆ°é˜Ÿåˆ—é‡Œï¼Œç›´åˆ°è¿‡äº†ä¸€æ®µæ—¶é—´æˆ–è€…æ“ä½œè¾¾åˆ°äº†ä¸€ä¸ªé˜ˆå€¼ï¼Œæ‰æ¸…ç©ºé˜Ÿåˆ—ã€‚ä½†æ˜¯ï¼<strong>å½“ä½ è·å–å¸ƒå±€ä¿¡æ¯çš„æ“ä½œçš„æ—¶å€™ï¼Œä¼šå¼ºåˆ¶é˜Ÿåˆ—åˆ·æ–°</strong>ï¼Œæ¯”å¦‚å½“ä½ è®¿é—®ä»¥ä¸‹å±æ€§æˆ–è€…ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•ï¼š</p>
<ul>
<li>offsetTopã€offsetLeftã€offsetWidthã€offsetHeight</li>
<li>scrollTopã€scrollLeftã€scrollWidthã€scrollHeight</li>
<li>clientTopã€clientLeftã€clientWidthã€clientHeight</li>
<li>getComputedStyle()</li>
<li>getBoundingClientRect</li>
<li>å…·ä½“å¯ä»¥è®¿é—®è¿™ä¸ªç½‘ç«™ï¼š<a href="https://gist.github.com/paulirish/5d52fb081b3570c81e3a">https://gist.github.com/pauliâ€¦</a>ç‚¹å‡»é¢„è§ˆ</li>
</ul>
<p>ä»¥ä¸Šå±æ€§å’Œæ–¹æ³•éƒ½éœ€è¦è¿”å›æœ€æ–°çš„å¸ƒå±€ä¿¡æ¯ï¼Œå› æ­¤æµè§ˆå™¨ä¸å¾—ä¸æ¸…ç©ºé˜Ÿåˆ—ï¼Œè§¦å‘å›æµé‡ç»˜æ¥è¿”å›æ­£ç¡®çš„å€¼ã€‚å› æ­¤ï¼Œæˆ‘ä»¬åœ¨ä¿®æ”¹æ ·å¼çš„æ—¶å€™ï¼Œ<strong>æœ€å¥½é¿å…ä½¿ç”¨ä¸Šé¢åˆ—å‡ºçš„å±æ€§ï¼Œä»–ä»¬éƒ½ä¼šåˆ·æ–°æ¸²æŸ“é˜Ÿåˆ—ã€‚</strong>å¦‚æœè¦ä½¿ç”¨å®ƒä»¬ï¼Œæœ€å¥½å°†å€¼ç¼“å­˜èµ·æ¥ã€‚</p>
<h3 id="å¦‚ä½•å‡å°‘å›æµä¸é‡ç»˜å¸¦æ¥çš„æ€§èƒ½æŸå¤±"><a href="#å¦‚ä½•å‡å°‘å›æµä¸é‡ç»˜å¸¦æ¥çš„æ€§èƒ½æŸå¤±" class="headerlink" title="å¦‚ä½•å‡å°‘å›æµä¸é‡ç»˜å¸¦æ¥çš„æ€§èƒ½æŸå¤±"></a>å¦‚ä½•å‡å°‘å›æµä¸é‡ç»˜å¸¦æ¥çš„æ€§èƒ½æŸå¤±</h3><ul>
<li>å…ˆå°†å…ƒç´ è®¾ä¸º<code>display: none</code>ï¼ˆéœ€è¦1æ¬¡é‡æ’å’Œé‡ç»˜ï¼‰ï¼Œç„¶åå¯¹è¿™ä¸ªèŠ‚ç‚¹è¿›è¡Œ100æ¬¡æ“ä½œï¼Œæœ€åå†æ¢å¤æ˜¾ç¤ºï¼ˆéœ€è¦1æ¬¡é‡æ’å’Œé‡ç»˜ï¼‰ã€‚è¿™æ ·ä¸€æ¥ï¼Œä½ å°±ç”¨ä¸¤æ¬¡é‡æ–°æ¸²æŸ“ï¼Œå–ä»£äº†å¯èƒ½é«˜è¾¾100æ¬¡çš„é‡æ–°æ¸²æŸ“ã€‚</li>
<li>positionå±æ€§ä¸º<code>absolute</code>æˆ–<code>fixed</code>çš„å…ƒç´ ï¼Œé‡æ’çš„å¼€é”€ä¼šæ¯”è¾ƒå°ï¼Œå› ä¸ºä¸ç”¨è€ƒè™‘å®ƒå¯¹å…¶ä»–å…ƒç´ çš„å½±å“ã€‚</li>
</ul>
<p>å‚è€ƒé“¾æ¥ï¼š</p>
<p><a href="https://segmentfault.com/a/1190000017329980">https://segmentfault.com/a/1190000017329980</a></p>
<p><a href="https://www.ruanyifeng.com/blog/2015/09/web-page-performance-in-depth.html">https://www.ruanyifeng.com/blog/2015/09/web-page-performance-in-depth.html</a></p>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/Performance/Critical_rendering_path">https://developer.mozilla.org/en-US/docs/Web/Performance/Critical_rendering_path</a></p>
<p><a href="https://developers.google.com/web/fundamentals/performance/critical-rendering-path/render-tree-construction">https://developers.google.com/web/fundamentals/performance/critical-rendering-path/render-tree-construction</a></p>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/Performance/How_browsers_work">https://developer.mozilla.org/zh-CN/docs/Web/Performance/How_browsers_work</a></p>
]]></content>
      <categories>
        <category>front-end</category>
      </categories>
      <tags>
        <tag>åŸºç¡€</tag>
        <tag>å›æµä¸é‡ç»˜</tag>
      </tags>
  </entry>
  <entry>
    <title>å­—èŠ‚OpenDayæ€»ç»“</title>
    <url>/2021/04/12/%E5%AD%97%E8%8A%82OpenDay%E6%80%BB%E7%BB%93/</url>
    <content><![CDATA[<h4 id="æ„Ÿå—"><a href="#æ„Ÿå—" class="headerlink" title="æ„Ÿå—"></a>æ„Ÿå—</h4><p>â€‹    å¤§å‚æ˜¯åœ¨é€ è½®å­ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ğŸ˜¶ã€‚</p>
<h4 id="æµç¨‹"><a href="#æµç¨‹" class="headerlink" title="æµç¨‹"></a>æµç¨‹</h4><ol>
<li>é¦–å…ˆä»–ä»¬ä»‹ç»äº†å—äº¬å­—èŠ‚çš„ä¸»è¦ä¸šåŠ¡ï¼Œæ•°æ®å¹³å°ã€‚</li>
<li>è¿›å…¥Q&amp;Aç¯èŠ‚ï¼ˆä¸»è¦èŠäº†ä¸€äº›é¢è¯•éœ€è¦æ³¨æ„å•¥ï¼‰ã€‚</li>
<li>åƒåƒå·¥ä½œé¤ã€‚</li>
</ol>
<h4 id="æ”¶è·"><a href="#æ”¶è·" class="headerlink" title="æ”¶è·"></a>æ”¶è·</h4><ul>
<li>åœ¨ç®€å†ä¸­éµå¾ªSTARåŸåˆ™ï¼Œç»“å°¾çš„Resultä¸­æ³¨æ„å…·ä½“æ•°æ®ä½“ç°ã€‚</li>
<li>åœ¨é¢è¯•æ—¶è¦ä»é¢è¯•å®˜çš„è§’åº¦æ€è€ƒï¼Œè¦ä»ä¸€ä¸ªç‚¹æ‰©å±•åˆ°ä¸€ä¸ªé¢ã€‚</li>
<li>å¦‚æœåœ¨Githubå¼€æºé¡¹ç›®ä¸­æœ‰è´¡çŒ®æœ€å¥½ã€‚</li>
</ul>
<h4 id="åæ€"><a href="#åæ€" class="headerlink" title="åæ€"></a>åæ€</h4><ul>
<li>åœ¨å­¦ä¹ ä¸­è¦æ³¨æ„è„‘å›¾çš„ä½¿ç”¨ï¼Œç»„æˆè‡ªå·±çš„æŠ€æœ¯ç»“æ„</li>
</ul>
]]></content>
      <categories>
        <category>é¢è¯•</category>
      </categories>
      <tags>
        <tag>å­¦ä¹ </tag>
        <tag>å­—èŠ‚</tag>
      </tags>
  </entry>
  <entry>
    <title>Promiseæ„é€ å‡½æ•°çš„åæ¨¡å¼</title>
    <url>/2021/04/10/Promise%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E7%9A%84%E5%8F%8D%E6%A8%A1%E5%BC%8F/</url>
    <content><![CDATA[<p>å…ˆä»ä¸€ä¸ªä¾‹å­æ¥çœ‹çœ‹Promiseçš„å¸¸è§çš„ä½¿ç”¨é”™è¯¯ã€‚</p>
<h4 id="Bad-Code"><a href="#Bad-Code" class="headerlink" title="Bad Code"></a>Bad Code</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Bad example! Spot 3 mistakes!</span></span><br><span class="line"></span><br><span class="line">doSomething().then(<span class="function"><span class="keyword">function</span>(<span class="params">result</span>) </span>&#123;</span><br><span class="line">  doSomethingElse(result) <span class="comment">// Forgot to return promise from inner chain + unnecessary nesting</span></span><br><span class="line">  .then(<span class="function"><span class="params">newResult</span> =&gt;</span> doThirdThing(newResult));</span><br><span class="line">&#125;).then(<span class="function">() =&gt;</span> doFourthThing());</span><br><span class="line"><span class="comment">// Forgot to terminate chain with a catch!</span></span><br></pre></td></tr></table></figure>

<h4 id="é”™è¯¯è§£æ"><a href="#é”™è¯¯è§£æ" class="headerlink" title="é”™è¯¯è§£æ"></a>é”™è¯¯è§£æ</h4><ul>
<li><p>The first mistake is to not chain things together properly. This happens when we create a new promise but forget to return it. As a consequence, the chain is broken, or rather, we have two independent chains racing. This means <code>doFourthThing()</code> wonâ€™t wait for  <code>doSomethingElse()</code> or <code>doThirdThing()</code> to finish, and will run in parallel with them, likely unintended. Separate chains also have separate error handling, leading to uncaught errors.ï¼ˆè¿™æ ·ä¼šå¯¼è‡´å¤šä¸ªç‹¬ç«‹çš„<code>Promise</code>é“¾å¹¶è¡Œè¿è¡Œï¼Œè€Œä¸”ä¸åŒçš„é“¾éœ€è¦ä¸åŒçš„é”™è¯¯å¤„ç†ï¼Œè¿™æ ·ä¼šå¯¼è‡´ä¸€äº›æˆ‘ä»¬æ²¡æœ‰é¢„æœŸçš„é”™è¯¯ã€‚ï¼‰</p>
</li>
<li><p>The second mistake is to nest unnecessarily, enabling the first mistake. Nesting also limits the scope of inner error handlers, whichâ€”if unintendedâ€”can lead to uncaught errors. A variant of this is the <a href="https://stackoverflow.com/questions/23803743/what-is-the-explicit-promise-construction-antipattern-and-how-do-i-avoid-it">promise constructor anti-pattern</a>, which combines nesting with redundant use of the promise constructor to wrap code that already uses promises.ï¼ˆç¬¬äºŒä¸ªé”™è¯¯æ˜¯ä¸å¿…è¦çš„åµŒå¥—ï¼Œä¼šè¯±å‘ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œè€Œä¸”ä¹Ÿæœ‰é”™è¯¯å¤„ç†é—®é¢˜ï¼Œä¸€ä¸ªå˜ä½“å°±æ˜¯<code>promise æ„é€ å‡½æ•°åæ¨¡å¼</code>ï¼Œè¿™ä¸ªæˆ‘ä¼šåœ¨ä¸‹é¢ç»™å‡ºç¤ºä¾‹ï¼‰</p>
</li>
<li><p>The third mistake is forgetting to terminate chains with <code>catch</code>. Unterminated promise chains lead to uncaught promise rejections in most browsers.ï¼ˆç¬¬ä¸‰ä¸ªé”™è¯¯å°±æ˜¯æ²¡æœ‰ç”¨catchæ¥ç»ˆæ­¢<code>promise</code>é“¾ï¼‰</p>
</li>
</ul>
<h4 id="Good-Code"><a href="#Good-Code" class="headerlink" title="Good Code"></a>Good Code</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">doSomething()</span><br><span class="line">.then(<span class="function"><span class="keyword">function</span>(<span class="params">result</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> doSomethingElse(result);</span><br><span class="line">&#125;)</span><br><span class="line">.then(<span class="function"><span class="params">newResult</span> =&gt;</span> doThirdThing(newResult))</span><br><span class="line">.then(<span class="function">() =&gt;</span> doFourthThing())</span><br><span class="line">.catch(<span class="function"><span class="params">error</span> =&gt;</span> <span class="built_in">console</span>.error(error));</span><br></pre></td></tr></table></figure>

<h4 id="åæ¨¡å¼å®šä¹‰"><a href="#åæ¨¡å¼å®šä¹‰" class="headerlink" title="åæ¨¡å¼å®šä¹‰"></a>åæ¨¡å¼å®šä¹‰</h4><p>ä¸‹é¢æ¥è¯´è¯´<code>Promiseçš„æ„é€ å‡½æ•°åæ¨¡å¼</code>,è¿™æ˜¯å®ƒçš„å®šä¹‰<code>which combines nesting with redundant use of the promise constructor to wrap code that already uses promises.</code></p>
<p>Example1ï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getStuffDone</span>(<span class="params">param</span>) </span>&#123;</span><br><span class="line"> <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">  	<span class="comment">// using a promise constructor</span></span><br><span class="line">   	myPromiseFn(param)</span><br><span class="line">   	.then(<span class="function"><span class="keyword">function</span>(<span class="params">val</span>) </span>&#123;</span><br><span class="line"> 		resolve(val);</span><br><span class="line">   	&#125;).catch(<span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</span><br><span class="line">    	reject(err);</span><br><span class="line">    &#125;);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<h4 id="Iview-adminä¸­å¯¹åæ¨¡å¼çš„ä½¿ç”¨"><a href="#Iview-adminä¸­å¯¹åæ¨¡å¼çš„ä½¿ç”¨" class="headerlink" title="Iview adminä¸­å¯¹åæ¨¡å¼çš„ä½¿ç”¨"></a>Iview adminä¸­å¯¹åæ¨¡å¼çš„ä½¿ç”¨</h4><p>å¦å¤–å†çœ‹ä¸€ä¸‹<code>iview admin</code>ä¸­çš„åº”ç”¨ï¼ˆæˆ‘åªæƒ³è¯´è¿™ä¸ªä»£ç å†™çš„å¥½è¿·å‘€ğŸ™„ï¼‰ï¼Œè¿åäº†ä¸Šé¢çš„æ³¨æ„äº‹é¡¹ï¼Œæœ‰ä¸¤æ¡ä¸åŒçš„é“¾ï¼Œè€Œä¸”å¦‚æœå…¶ä¸­ä¸€ä¸ªå‡½æ•°å‡ºé”™ï¼Œé‚£ä¹ˆè‚¯å®šæ˜¯æ²¡æœ‰å¾—åˆ°å¤„ç†ï¼Œæˆ‘è§‰å¾—å¦‚æœä½¿ç”¨çš„åŒ–ï¼Œæœ€èµ·ç åœ¨ä¸¤å¤„åŠ ä¸Š<code>catch</code>è¯­å¥ã€‚</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"> <span class="built_in">this</span>.handleLogin(&#123; userName, password &#125;).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.getUserInfo().then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="built_in">this</span>.$router.push(&#123;</span><br><span class="line">            name: <span class="built_in">this</span>.$config.homeName</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line"><span class="comment">//æ”¹æˆé“¾å¼</span></span><br><span class="line"> <span class="built_in">this</span>.handleLogin(&#123; userName, password &#125;).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.getUserInfo()</span><br><span class="line"> 		&#125;).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">          	<span class="built_in">this</span>.$router.push(&#123;</span><br><span class="line">            name: <span class="built_in">this</span>.$config.homeName</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;).catch(<span class="function"><span class="params">error</span> =&gt;</span> <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;login error&#x27;</span>))</span><br></pre></td></tr></table></figure>

<p><code>Vuex</code>ä¸­çš„ä»£ç ï¼ˆä»£ç é‡ŒåŠ äº†æ³¨é‡Šï¼‰</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">handleLogin (&#123; commit &#125;, &#123; userName, password &#125;) &#123;</span><br><span class="line">      userName = userName.trim()</span><br><span class="line">    	<span class="comment">//è¿™é‡Œç”¨äº†Promiseçš„æ„é€ å‡½æ•°åæ¨¡å¼</span></span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        login(&#123;</span><br><span class="line">          userName,</span><br><span class="line">          password</span><br><span class="line">        &#125;).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">const</span> data = res.data</span><br><span class="line">          commit(<span class="string">&#x27;setToken&#x27;</span>, data.token)</span><br><span class="line">          resolve()</span><br><span class="line">        &#125;).catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">          reject(err)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">getUserInfo (&#123; state, commit &#125;) &#123;</span><br><span class="line">     <span class="comment">//è¿™é‡Œç”¨äº†Promiseçš„æ„é€ å‡½æ•°åæ¨¡å¼ï¼Œè¿™é‡Œæ³¨æ„æœ€åTAä½¿ç”¨äº†Try Catchæ¥è§£å†³ä¸åŒé“¾çš„é”™è¯¯å¤„ç†</span></span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">          getUserInfo(state.token).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> data = res.data</span><br><span class="line">         	....</span><br><span class="line">            commit(<span class="string">&#x27;setAccess&#x27;</span>, data.access)</span><br><span class="line">            resolve(data)</span><br><span class="line">          &#125;).catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">            reject(err)</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">          reject(error)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure>

<h4 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h4><p>Quoting Esailija:</p>
<p>This is the most common anti-pattern. It is easy to fall into this when you donâ€™t really understand promises and think of them as glorified event emitters or callback utility. Letâ€™s recap: promises are about making asynchronous code retain most of the lost properties of synchronous code such as flat indentation and one exception channel.</p>
<p>å‚è€ƒæ–‡ç« ï¼š</p>
<p> <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise</a><br> <a href="https://stackoverflow.com/questions/23803743/what-is-the-explicit-promise-construction-antipattern-and-how-do-i-avoid-it">https://stackoverflow.com/questions/23803743/what-is-the-explicit-promise-construction-antipattern-and-how-do-i-avoid-it</a><br> <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Using_promises">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Using_promises</a></p>
]]></content>
      <categories>
        <category>front-end</category>
      </categories>
      <tags>
        <tag>Promise</tag>
      </tags>
  </entry>
</search>
